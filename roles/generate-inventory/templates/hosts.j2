[OSEv3:children]
masters
etcd
nodes
{% if (groups.masters | length) > 1 %}lb {% endif %}


[OSEv3:vars]



[masters]
{% for item in groups.masters -%}
{{item}} ansible_host='{{ hostvars[item].ansible_host }}' private_ip='{{ hostvars[item].private_ip }}'
{% endfor %}

[etcd]
{% for item in groups.masters -%}
{{item}} ansible_host='{{ hostvars[item].ansible_host }}' private_ip='{{ hostvars[item].private_ip }}'
{% endfor %}

[nodes]
{% for item in groups.nodes -%}
{{item}}  ansible_host='{{ hostvars[item].ansible_host }}' private_ip='{{ hostvars[item].private_ip }}' openshift_node_group_name='{{hostvars[item].openshift_node_group_name}}'
{% endfor %}

{% if (groups.masters | length) >1 %}
[lb]
{{groups.lb.0}} ansible_host='{{ hostvars[groups.lb.0].ansible_host }}' private_ip='{{ hostvars[groups.lb.0].private_ip }}'
{% endif %}

{% if (groups.masters | length) == 1 %}
[util]
{{groups.util.0}} ansible_host='{{ hostvars[groups.util.0].ansible_host }}' private_ip='{{ hostvars[groups.util.0].private_ip }}'
{% endif %}
